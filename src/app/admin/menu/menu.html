
<div class="flex flex-col p-4 sm:p-5 lg:flex-row gap-6 lg:gap-8">

    <!-- Left Section: Categories -->
    <div class="lg:w-1/4 w-full p-4 rounded-lg shadow-inner">
        <h2 class="text-lg sm:text-xl md:text-2xl font-semibold text-gray-700 mb-4 sm:mb-6">Categories</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-4">

            <!-- Create Category -->
            <div class="mb-4">
                <button (click)="showCreateCategory = !showCreateCategory"
                    class="w-full sm:w-auto bg-gradient-to-r from-emerald-600 to-emerald-900 text-white px-4 sm:px-6 py-2 rounded-xl font-semibold shadow-lg transition duration-200 tracking-wide hover:scale-105 mb-3">
                    {{ showCreateCategory ? 'Hide' : 'Create Category' }}
                </button>

                @if (showCreateCategory) {
                <button (click)="resetCategoryForm()"
                    class="w-full sm:w-auto bg-gray-400 ml-0 sm:ml-2 text-white px-4 sm:px-6 py-2 rounded-xl font-semibold shadow-lg transition duration-200 tracking-wide hover:scale-105">
                    Reset
                </button>
                }

                @if (showCreateCategory) {
                <div class="flex flex-col sm:flex-row gap-2 mt-3">
                    <input type="text" [(ngModel)]="newCategoryName" placeholder="Enter category name"
                        class="flex-1 border rounded-lg px-3 sm:px-4 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500" />
                    <button (click)="createOrUpdateCategory()"
                        class="bg-gradient-to-r from-emerald-600 to-emerald-900 text-white px-4 sm:px-6 py-2 rounded-xl font-semibold shadow-lg transition duration-200 tracking-wide hover:scale-105">
                        {{ editingCategoryId ? 'Save' : 'Create' }}
                    </button>
                </div>
                }
            </div>

            <!-- Category Card -->
          @for (category of categories; track category.id) {
            <div (click)="selectCategory(category)"
                 [ngClass]="{'bg-emerald-50 border-2 border-green-200 ': productOfCategory?.name === category?.name}"
                 class="relative p-4 rounded-md shadow-sm border border-gray-200 hover:shadow-md transition-shadow">

              <!-- Top-right icons -->
              <div class="absolute top-2 right-2 flex items-center gap-1">


                <!-- Edit button -->


                <button  (click)="onEditCategory(category)"
                        class="bg-gray-600 text-white px-2 py-1 rounded-full text-xs hover:bg-gray-700 focus:ring-2 focus:ring-yellow-400">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 inline-block mr-1">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 3.487a2.25 2.25 0 0 1 3.182 3.182L7.5 19.213H4v-3.5L16.862 3.487z" />
                  </svg>
                  Edit
                </button>

                <!-- Delete button -->
                <button (click)="deleteCategory(category.id)" class="bg-red-500 text-white px-2 py-1 rounded-full text-xs hover:bg-red-600 focus:ring-2 focus:ring-red-500">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                  </svg>

                </button>
              </div>

              <!-- Category name -->
              <h3 class="font-medium text-gray-900">{{ category?.name }}</h3>
            </div>
          }

        </div>
    </div>

    <!-- Right Section: Products -->
    <div class="lg:w-3/4 w-full bg-gray-50 p-4 sm:p-6 rounded-lg shadow-inner">
        <h2 class="text-lg sm:text-xl md:text-2xl font-semibold text-gray-700 mb-4 sm:mb-6">Menu</h2>
        <div class="mb-4">
            @if(productOfCategory){
            <button (click)="showCreateProduct = !showCreateProduct"
                class="bg-gradient-to-r from-gray-600 to-gray-900 text-white px-4 sm:px-6 py-2 rounded-xl font-semibold shadow-lg transition duration-200 hover:scale-105 mb-3">
                {{ showCreateProduct ? 'Hide' : 'Create Product' }}
            </button>
              <button (click)="productForm.reset(); editingProduct = false"
                      class="w-full sm:w-auto bg-gray-400 ml-0 sm:ml-2 text-white px-4 sm:px-6 py-2 rounded-xl font-semibold shadow-lg transition duration-200 tracking-wide hover:scale-105">
                Reset
              </button>
            }
            @if (showCreateProduct) {
            <form [formGroup]="productForm" (ngSubmit)="onSubmitProduct()"
                class="flex flex-col sm:flex-row flex-wrap gap-3 mt-2 items-center">
                <input type="text" placeholder="Product Name" formControlName="name"
                    class="border rounded-lg px-3 sm:px-4 py-2 focus:ring-2 focus:ring-gray-500 flex-1 min-w-[150px]" />
                <input type="text" placeholder="Description" formControlName="description"
                    class="border rounded-lg px-3 sm:px-4 py-2 focus:ring-2 focus:ring-gray-500 flex-1 min-w-[150px]" />
                <input type="number" placeholder="Price" formControlName="price"
                    class="border rounded-lg px-3 sm:px-4 py-2 focus:ring-2 focus:ring-gray-500 w-full sm:w-28" />
                <button type="submit" [disabled]="productForm.invalid"
                    class="bg-gradient-to-r from-gray-600 to-gray-900 text-white px-4 sm:px-6 py-2 rounded-xl font-semibold shadow-lg transition duration-200 hover:scale-105">
                   {{ editingProduct ? 'Edit' :'Crate'}}
                </button>

            </form>
            }
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4 sm:gap-6">
            @if (productOfCategory) {
              @for (product of productOfCategory?.products; track $index) {
                <div class="relative bg-white rounded-md shadow-md p-4 border border-gray-200 hover:shadow-lg transition-shadow">

                  <!-- Top-right buttons -->
                  <div class="absolute top-2 right-2 flex items-center gap-1">
                    <button (click)="editProduct(product)"
                            class="bg-gray-600 text-white px-2 py-1 rounded-full text-xs hover:bg-gray-700 focus:ring-2 focus:ring-yellow-400">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 inline-block mr-1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 3.487a2.25 2.25 0 0 1 3.182 3.182L7.5 19.213H4v-3.5L16.862 3.487z" />
                      </svg>
                      Edit
                    </button>

                    <button (click)="deleteProduct(product?.id)"
                            class="bg-red-500 text-white px-2 py-1 rounded-full text-xs hover:bg-red-600 focus:ring-2 focus:ring-red-500">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                      </svg>
                    </button>
                  </div>

                  <!-- Product info -->
                  <div>
                    <h3 class="font-semibold text-gray-900 text-base sm:text-lg mb-1">{{ product?.name }}</h3>
                    <p class="text-gray-700 text-sm mb-2">{{ product?.description }}</p>
                    <span class="text-blue-600 font-bold text-lg sm:text-xl">{{ product?.price }}</span>
                  </div>
                </div>
              }

            }
        </div>
    </div>
</div>

<app-toaster />
